# Isolation: swap exact-in basic checks (no add/sub)

i1 : bv[16] = in file("experiments/io/inputs/swap_exact_in_reserve_in_hi.in")
i2 : bv[16] = in file("experiments/io/inputs/swap_exact_in_reserve_in_lo.in")
i3 : bv[16] = in file("experiments/io/inputs/swap_exact_in_reserve_out_hi.in")
i4 : bv[16] = in file("experiments/io/inputs/swap_exact_in_reserve_out_lo.in")
i5 : bv[16] = in file("experiments/io/inputs/swap_exact_in_amount_in_hi.in")
i6 : bv[16] = in file("experiments/io/inputs/swap_exact_in_amount_in_lo.in")
i7 : bv[16] = in file("experiments/io/inputs/swap_exact_in_fee_bps.in")
i8 : bv[16] = in file("experiments/io/inputs/swap_exact_in_min_out_hi.in")
i9 : bv[16] = in file("experiments/io/inputs/swap_exact_in_min_out_lo.in")
i10 : bv[16] = in file("experiments/io/inputs/swap_exact_in_amount_out_hi.in")
i11 : bv[16] = in file("experiments/io/inputs/swap_exact_in_amount_out_lo.in")

o1 : sbf = out file("experiments/isolation/outputs/swap_exact_in_basic_ok.out")

fee_bps_valid(fee : bv[16]) := (fee >= { #x0000 }:bv[16]) && (fee <= { #x2710 }:bv[16]).

is_positive_32(hi : bv[16], lo : bv[16]) := (hi > { #x0000 }:bv[16]) || (hi = { #x0000 }:bv[16] && lo > { #x0000 }:bv[16]).

value_gte_32(hi1 : bv[16], lo1 : bv[16], hi2 : bv[16], lo2 : bv[16]) := (hi1 > hi2) || (hi1 = hi2 && lo1 >= lo2).

basic_ok() := is_positive_32(i1[t], i2[t]) && is_positive_32(i3[t], i4[t]) && is_positive_32(i5[t], i6[t]) && fee_bps_valid(i7[t]) && is_positive_32(i10[t], i11[t]) && value_gte_32(i3[t], i4[t], i10[t], i11[t]) && value_gte_32(i10[t], i11[t], i8[t], i9[t]).

r (o1[t]:sbf = 1:sbf <-> basic_ok())
q
