# Spec 30: Slippage guard with 2-step cooldown

stable(curr : bv[16], prev : bv[16]) := ((curr >= prev) && (curr - prev <= { #x0032 }:bv[16])) || ((curr < prev) && (prev - curr <= { #x0032 }:bv[16])).

always (o1[0]:sbf = 0:sbf) && (o2[0]:sbf = 0:sbf) && (o3[0]:sbf = 0:sbf) && (o4[0]:sbf = 0:sbf) && (o1[t]:sbf = 1:sbf <-> stable(i1[t]:bv[16], i1[t-1]:bv[16])) && (o2[t]:sbf = o1[t]') && (o3[t]:sbf = o2[t-1]) && (o4[t]:sbf = o2[t-1] | o3[t-1]) && (o5[t]:sbf = o1[t] & o4[t]').
